
var assert = require('assert')
var clone = require('../');

describe('regexp-clone', function()***REMOVED***
  function hasEqualSource (a, b) ***REMOVED***
    assert.ok(a !== b);
    assert.equal(a.source, b.source);
  ***REMOVED***

  function isInsensitive (a) ***REMOVED***
    assert.ok(a.ignoreCase);
  ***REMOVED***

  function isGlobal (a) ***REMOVED***
    assert.ok(a.global);
  ***REMOVED***

  function isMultiline (a) ***REMOVED***
    assert.ok(a.multiline);
  ***REMOVED***

  function insensitiveFlag (a) ***REMOVED***
    var b = clone(a);
    hasEqualSource(a, b);
    isInsensitive(a);
    isInsensitive(b);
  ***REMOVED***

  function globalFlag (a) ***REMOVED***
    var b = clone(a);
    hasEqualSource(a, b);
    isGlobal(a);
    isGlobal(b);
  ***REMOVED***

  function multilineFlag (a) ***REMOVED***
    var b = clone(a);
    hasEqualSource(a, b);
    isMultiline(a);
    isMultiline(b);
  ***REMOVED***

  describe('literals', function()***REMOVED***
    it('insensitive flag', function(done)***REMOVED***
      var a = /hello/i;
      insensitiveFlag(a);
      done();
    ***REMOVED***)
    it('global flag', function(done)***REMOVED***
      var a = /hello/g;
      globalFlag(a);
      done();
    ***REMOVED***)
    it('multiline flag', function(done)***REMOVED***
      var a = /hello/m;
      multilineFlag(a);
      done();
    ***REMOVED***)
    it('no flags', function(done)***REMOVED***
      var a = /hello/;
      var b = clone(a);
      hasEqualSource(a, b);
      assert.ok(!a.insensitive);
      assert.ok(!a.global);
      assert.ok(!a.global);
      done();
    ***REMOVED***)
    it('all flags', function(done)***REMOVED***
      var a = /hello/gim;
      insensitiveFlag(a);
      globalFlag(a);
      multilineFlag(a);
      done();
    ***REMOVED***)
  ***REMOVED***)

  describe('instances', function()***REMOVED***
    it('insensitive flag', function(done)***REMOVED***
      var a = new RegExp('hello', 'i');
      insensitiveFlag(a);
      done();
    ***REMOVED***)
    it('global flag', function(done)***REMOVED***
      var a = new RegExp('hello', 'g');
      globalFlag(a);
      done();
    ***REMOVED***)
    it('multiline flag', function(done)***REMOVED***
      var a = new RegExp('hello', 'm');
      multilineFlag(a);
      done();
    ***REMOVED***)
    it('no flags', function(done)***REMOVED***
      var a = new RegExp('hmm');
      var b = clone(a);
      hasEqualSource(a, b);
      assert.ok(!a.insensitive);
      assert.ok(!a.global);
      assert.ok(!a.global);
      done();
    ***REMOVED***)
    it('all flags', function(done)***REMOVED***
      var a = new RegExp('hello', 'gim');
      insensitiveFlag(a);
      globalFlag(a);
      multilineFlag(a);
      done();
    ***REMOVED***)
  ***REMOVED***)
***REMOVED***)

