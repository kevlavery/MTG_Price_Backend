'use strict';

const _modifiedPaths = require('../common').modifiedPaths;

/**
 * Given an update document with potential update operators (`$set`, etc.)
 * returns an object whose keys are the directly modified paths
 *
 * @param ***REMOVED***Object***REMOVED*** update
 * @return ***REMOVED***Object***REMOVED*** modified
 */

module.exports = function modifiedPaths(update) ***REMOVED***
  const keys = Object.keys(update);
  const hasDollarKey = keys.filter(key => key.startsWith('$')).length > 0;

  const res = ***REMOVED******REMOVED***;
  if (hasDollarKey) ***REMOVED***
    for (const key of keys) ***REMOVED***
      _modifiedPaths(update[key], '', res);
    ***REMOVED***
  ***REMOVED*** else ***REMOVED***
    _modifiedPaths(update, '', res);
  ***REMOVED***

  return res;
***REMOVED***;
