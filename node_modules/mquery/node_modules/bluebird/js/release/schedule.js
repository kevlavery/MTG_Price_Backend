"use strict";
var util = require("./util");
var schedule;
var noAsyncScheduler = function() ***REMOVED***
    throw new Error("No async scheduler available\u000a\u000a    See http://goo.gl/MqrFmX\u000a");
***REMOVED***;
var NativePromise = util.getNativePromise();
if (util.isNode && typeof MutationObserver === "undefined") ***REMOVED***
    var GlobalSetImmediate = global.setImmediate;
    var ProcessNextTick = process.nextTick;
    schedule = util.isRecentNode
                ? function(fn) ***REMOVED*** GlobalSetImmediate.call(global, fn); ***REMOVED***
                : function(fn) ***REMOVED*** ProcessNextTick.call(process, fn); ***REMOVED***;
***REMOVED*** else if (typeof NativePromise === "function" &&
           typeof NativePromise.resolve === "function") ***REMOVED***
    var nativePromise = NativePromise.resolve();
    schedule = function(fn) ***REMOVED***
        nativePromise.then(fn);
    ***REMOVED***;
***REMOVED*** else if ((typeof MutationObserver !== "undefined") &&
          !(typeof window !== "undefined" &&
            window.navigator &&
            (window.navigator.standalone || window.cordova))) ***REMOVED***
    schedule = (function() ***REMOVED***
        var div = document.createElement("div");
        var opts = ***REMOVED***attributes: true***REMOVED***;
        var toggleScheduled = false;
        var div2 = document.createElement("div");
        var o2 = new MutationObserver(function() ***REMOVED***
            div.classList.toggle("foo");
            toggleScheduled = false;
        ***REMOVED***);
        o2.observe(div2, opts);

        var scheduleToggle = function() ***REMOVED***
            if (toggleScheduled) return;
            toggleScheduled = true;
            div2.classList.toggle("foo");
        ***REMOVED***;

        return function schedule(fn) ***REMOVED***
            var o = new MutationObserver(function() ***REMOVED***
                o.disconnect();
                fn();
            ***REMOVED***);
            o.observe(div, opts);
            scheduleToggle();
        ***REMOVED***;
    ***REMOVED***)();
***REMOVED*** else if (typeof setImmediate !== "undefined") ***REMOVED***
    schedule = function (fn) ***REMOVED***
        setImmediate(fn);
    ***REMOVED***;
***REMOVED*** else if (typeof setTimeout !== "undefined") ***REMOVED***
    schedule = function (fn) ***REMOVED***
        setTimeout(fn, 0);
    ***REMOVED***;
***REMOVED*** else ***REMOVED***
    schedule = noAsyncScheduler;
***REMOVED***
module.exports = schedule;
