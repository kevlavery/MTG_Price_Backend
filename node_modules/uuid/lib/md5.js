'use strict';

var crypto = require('crypto');

function md5(bytes) ***REMOVED***
  if (typeof Buffer.from === 'function') ***REMOVED***
    // Modern Buffer API
    if (Array.isArray(bytes)) ***REMOVED***
      bytes = Buffer.from(bytes);
    ***REMOVED*** else if (typeof bytes === 'string') ***REMOVED***
      bytes = Buffer.from(bytes, 'utf8');
    ***REMOVED***
  ***REMOVED*** else ***REMOVED***
    // Pre-v4 Buffer API
    if (Array.isArray(bytes)) ***REMOVED***
      bytes = new Buffer(bytes);
    ***REMOVED*** else if (typeof bytes === 'string') ***REMOVED***
      bytes = new Buffer(bytes, 'utf8');
    ***REMOVED***
  ***REMOVED***

  return crypto.createHash('md5').update(bytes).digest();
***REMOVED***

module.exports = md5;
