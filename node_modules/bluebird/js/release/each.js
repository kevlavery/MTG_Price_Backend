"use strict";
module.exports = function(Promise, INTERNAL) ***REMOVED***
var PromiseReduce = Promise.reduce;
var PromiseAll = Promise.all;

function promiseAllThis() ***REMOVED***
    return PromiseAll(this);
***REMOVED***

function PromiseMapSeries(promises, fn) ***REMOVED***
    return PromiseReduce(promises, fn, INTERNAL, INTERNAL);
***REMOVED***

Promise.prototype.each = function (fn) ***REMOVED***
    return PromiseReduce(this, fn, INTERNAL, 0)
              ._then(promiseAllThis, undefined, undefined, this, undefined);
***REMOVED***;

Promise.prototype.mapSeries = function (fn) ***REMOVED***
    return PromiseReduce(this, fn, INTERNAL, INTERNAL);
***REMOVED***;

Promise.each = function (promises, fn) ***REMOVED***
    return PromiseReduce(promises, fn, INTERNAL, 0)
              ._then(promiseAllThis, undefined, undefined, promises, undefined);
***REMOVED***;

Promise.mapSeries = PromiseMapSeries;
***REMOVED***;

