(function () ***REMOVED***
  "use strict";

  var forEachAsync = require('./forEachAsync').forEachAsync
    ;

  forEachAsync([0, 500, 70, 200, 400, 100], function (next, element, i, arr) ***REMOVED***
    // test that array order is as expected
    console.log(element, 'is element', i, 'of', arr.length);

    // test that thisness is applied
    this[element] = i;

    if (i > 2) ***REMOVED***
      // test that synchronous callbacks don't mess things up
      next();
    ***REMOVED*** else ***REMOVED***
      // test asynchronous callbacks
      setTimeout(next, element);
    ***REMOVED***
  ***REMOVED***, ***REMOVED******REMOVED***).then(function () ***REMOVED***
    // test that thisness carries
    console.log(this);
  ***REMOVED***).then(function () ***REMOVED***
    // test then chaining
    console.log("now wasn't that nice?");
  ***REMOVED***);

***REMOVED***());
