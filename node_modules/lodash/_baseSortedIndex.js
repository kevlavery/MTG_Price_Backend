var baseSortedIndexBy = require('./_baseSortedIndexBy'),
    identity = require('./identity'),
    isSymbol = require('./isSymbol');

/** Used as references for the maximum length and index of an array. */
var MAX_ARRAY_LENGTH = 4294967295,
    HALF_MAX_ARRAY_LENGTH = MAX_ARRAY_LENGTH >>> 1;

/**
 * The base implementation of `_.sortedIndex` and `_.sortedLastIndex` which
 * performs a binary search of `array` to determine the index at which `value`
 * should be inserted into `array` in order to maintain its sort order.
 *
 * @private
 * @param ***REMOVED***Array***REMOVED*** array The sorted array to inspect.
 * @param ***REMOVED*******REMOVED*** value The value to evaluate.
 * @param ***REMOVED***boolean***REMOVED*** [retHighest] Specify returning the highest qualified index.
 * @returns ***REMOVED***number***REMOVED*** Returns the index at which `value` should be inserted
 *  into `array`.
 */
function baseSortedIndex(array, value, retHighest) ***REMOVED***
  var low = 0,
      high = array == null ? low : array.length;

  if (typeof value == 'number' && value === value && high <= HALF_MAX_ARRAY_LENGTH) ***REMOVED***
    while (low < high) ***REMOVED***
      var mid = (low + high) >>> 1,
          computed = array[mid];

      if (computed !== null && !isSymbol(computed) &&
          (retHighest ? (computed <= value) : (computed < value))) ***REMOVED***
        low = mid + 1;
      ***REMOVED*** else ***REMOVED***
        high = mid;
      ***REMOVED***
    ***REMOVED***
    return high;
  ***REMOVED***
  return baseSortedIndexBy(array, value, identity, retHighest);
***REMOVED***

module.exports = baseSortedIndex;
