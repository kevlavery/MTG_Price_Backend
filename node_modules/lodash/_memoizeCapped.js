var memoize = require('./memoize');

/** Used as the maximum memoize cache size. */
var MAX_MEMOIZE_SIZE = 500;

/**
 * A specialized version of `_.memoize` which clears the memoized function's
 * cache when it exceeds `MAX_MEMOIZE_SIZE`.
 *
 * @private
 * @param ***REMOVED***Function***REMOVED*** func The function to have its output memoized.
 * @returns ***REMOVED***Function***REMOVED*** Returns the new memoized function.
 */
function memoizeCapped(func) ***REMOVED***
  var result = memoize(func, function(key) ***REMOVED***
    if (cache.size === MAX_MEMOIZE_SIZE) ***REMOVED***
      cache.clear();
    ***REMOVED***
    return key;
  ***REMOVED***);

  var cache = result.cache;
  return result;
***REMOVED***

module.exports = memoizeCapped;
