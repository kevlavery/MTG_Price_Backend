var memoizeCapped = require('./_memoizeCapped');

/** Used to match property names within property paths. */
var rePropName = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;

/** Used to match backslashes in property paths. */
var reEscapeChar = /\\(\\)?/g;

/**
 * Converts `string` to a property path array.
 *
 * @private
 * @param ***REMOVED***string***REMOVED*** string The string to convert.
 * @returns ***REMOVED***Array***REMOVED*** Returns the property path array.
 */
var stringToPath = memoizeCapped(function(string) ***REMOVED***
  var result = [];
  if (string.charCodeAt(0) === 46 /* . */) ***REMOVED***
    result.push('');
  ***REMOVED***
  string.replace(rePropName, function(match, number, quote, subString) ***REMOVED***
    result.push(quote ? subString.replace(reEscapeChar, '$1') : (number || match));
  ***REMOVED***);
  return result;
***REMOVED***);

module.exports = stringToPath;
