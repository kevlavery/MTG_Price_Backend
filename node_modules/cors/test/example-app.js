(function () ***REMOVED***
  /*global describe, it*/

  'use strict';

  var should = require('should'),
    express = require('express'),
    supertest = require('supertest'),
    cors = require('../lib');

  var simpleApp,
    complexApp;

  /* -------------------------------------------------------------------------- */

  simpleApp = express();
  simpleApp.head('/', cors(), function (req, res) ***REMOVED***
    res.status(204).send();
  ***REMOVED***);
  simpleApp.get('/', cors(), function (req, res) ***REMOVED***
    res.send('Hello World (Get)');
  ***REMOVED***);
  simpleApp.post('/', cors(), function (req, res) ***REMOVED***
    res.send('Hello World (Post)');
  ***REMOVED***);

  /* -------------------------------------------------------------------------- */

  complexApp = express();
  complexApp.options('/', cors());
  complexApp.delete('/', cors(), function (req, res) ***REMOVED***
    res.send('Hello World (Delete)');
  ***REMOVED***);

  /* -------------------------------------------------------------------------- */

  describe('example app(s)', function () ***REMOVED***
    describe('simple methods', function () ***REMOVED***
      it('GET works', function (done) ***REMOVED***
        supertest(simpleApp)
          .get('/')
          .expect(200)
          .end(function (err, res) ***REMOVED***
            should.not.exist(err);
            res.headers['access-control-allow-origin'].should.eql('*');
            res.text.should.eql('Hello World (Get)');
            done();
          ***REMOVED***);
      ***REMOVED***);
      it('HEAD works', function (done) ***REMOVED***
        supertest(simpleApp)
          .head('/')
          .expect(204)
          .end(function (err, res) ***REMOVED***
            should.not.exist(err);
            res.headers['access-control-allow-origin'].should.eql('*');
            done();
          ***REMOVED***);
      ***REMOVED***);
      it('POST works', function (done) ***REMOVED***
        supertest(simpleApp)
          .post('/')
          .expect(200)
          .end(function (err, res) ***REMOVED***
            should.not.exist(err);
            res.headers['access-control-allow-origin'].should.eql('*');
            res.text.should.eql('Hello World (Post)');
            done();
          ***REMOVED***);
      ***REMOVED***);
    ***REMOVED***);

    describe('complex methods', function () ***REMOVED***
      it('OPTIONS works', function (done) ***REMOVED***
        supertest(complexApp)
          .options('/')
          .expect(204)
          .end(function (err, res) ***REMOVED***
            should.not.exist(err);
            res.headers['access-control-allow-origin'].should.eql('*');
            done();
          ***REMOVED***);
      ***REMOVED***);
      it('DELETE works', function (done) ***REMOVED***
        supertest(complexApp)
          .del('/')
          .expect(200)
          .end(function (err, res) ***REMOVED***
            should.not.exist(err);
            res.headers['access-control-allow-origin'].should.eql('*');
            res.text.should.eql('Hello World (Delete)');
            done();
          ***REMOVED***);
      ***REMOVED***);
    ***REMOVED***);
  ***REMOVED***);

***REMOVED***());
