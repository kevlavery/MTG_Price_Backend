'use strict';

var test = require('tape');
var utils = require('../lib/utils');

test('merge()', function (t) ***REMOVED***
    t.deepEqual(utils.merge(***REMOVED*** a: 'b' ***REMOVED***, ***REMOVED*** a: 'c' ***REMOVED***), ***REMOVED*** a: ['b', 'c'] ***REMOVED***, 'merges two objects with the same key');

    var oneMerged = utils.merge(***REMOVED*** foo: 'bar' ***REMOVED***, ***REMOVED*** foo: ***REMOVED*** first: '123' ***REMOVED*** ***REMOVED***);
    t.deepEqual(oneMerged, ***REMOVED*** foo: ['bar', ***REMOVED*** first: '123' ***REMOVED***] ***REMOVED***, 'merges a standalone and an object into an array');

    var twoMerged = utils.merge(***REMOVED*** foo: ['bar', ***REMOVED*** first: '123' ***REMOVED***] ***REMOVED***, ***REMOVED*** foo: ***REMOVED*** second: '456' ***REMOVED*** ***REMOVED***);
    t.deepEqual(twoMerged, ***REMOVED*** foo: ***REMOVED*** 0: 'bar', 1: ***REMOVED*** first: '123' ***REMOVED***, second: '456' ***REMOVED*** ***REMOVED***, 'merges a standalone and two objects into an array');

    var sandwiched = utils.merge(***REMOVED*** foo: ['bar', ***REMOVED*** first: '123', second: '456' ***REMOVED***] ***REMOVED***, ***REMOVED*** foo: 'baz' ***REMOVED***);
    t.deepEqual(sandwiched, ***REMOVED*** foo: ['bar', ***REMOVED*** first: '123', second: '456' ***REMOVED***, 'baz'] ***REMOVED***, 'merges an object sandwiched by two standalones into an array');

    var nestedArrays = utils.merge(***REMOVED*** foo: ['baz'] ***REMOVED***, ***REMOVED*** foo: ['bar', 'xyzzy'] ***REMOVED***);
    t.deepEqual(nestedArrays, ***REMOVED*** foo: ['baz', 'bar', 'xyzzy'] ***REMOVED***);

    t.end();
***REMOVED***);

test('assign()', function (t) ***REMOVED***
    var target = ***REMOVED*** a: 1, b: 2 ***REMOVED***;
    var source = ***REMOVED*** b: 3, c: 4 ***REMOVED***;
    var result = utils.assign(target, source);

    t.equal(result, target, 'returns the target');
    t.deepEqual(target, ***REMOVED*** a: 1, b: 3, c: 4 ***REMOVED***, 'target and source are merged');
    t.deepEqual(source, ***REMOVED*** b: 3, c: 4 ***REMOVED***, 'source is untouched');

    t.end();
***REMOVED***);
