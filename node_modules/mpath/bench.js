
var mpath = require('./')
var Bench = require('benchmark');
var sha = require('child_process').exec("git log --pretty=format:'%h' -n 1", function (err, sha) ***REMOVED***
  if (err) throw err;

  var fs = require('fs')
  var filename = __dirname + '/bench.out';
  var out = fs.createWriteStream(filename, ***REMOVED*** flags: 'a', encoding: 'utf8' ***REMOVED***);

  /**
   * test doc creator
   */

  function doc () ***REMOVED***
    var o = ***REMOVED*** first: ***REMOVED*** second: ***REMOVED*** third: [3,***REMOVED*** name: 'aaron' ***REMOVED***, 9] ***REMOVED******REMOVED******REMOVED***;
    o.comments = [
        ***REMOVED*** name: 'one' ***REMOVED***
      , ***REMOVED*** name: 'two', _doc: ***REMOVED*** name: '2' ***REMOVED******REMOVED***
      , ***REMOVED*** name: 'three'
          , comments: [***REMOVED******REMOVED***,***REMOVED*** comments: [***REMOVED***val: 'twoo'***REMOVED***]***REMOVED***]
          , _doc: ***REMOVED*** name: '3', comments: [***REMOVED******REMOVED***,***REMOVED*** _doc: ***REMOVED*** comments: [***REMOVED*** val: 2 ***REMOVED***] ***REMOVED******REMOVED***]  ***REMOVED******REMOVED***
    ];
    o.name = 'jiro';
    o.array = [
        ***REMOVED*** o: ***REMOVED*** array: [***REMOVED***x: ***REMOVED***b: [4,6,8]***REMOVED******REMOVED***, ***REMOVED*** y: 10***REMOVED*** ] ***REMOVED******REMOVED***
      , ***REMOVED*** o: ***REMOVED*** array: [***REMOVED***x: ***REMOVED***b: [1,2,3]***REMOVED******REMOVED***, ***REMOVED*** x: ***REMOVED***z: 10 ***REMOVED******REMOVED***, ***REMOVED*** x: ***REMOVED***b: 'hi'***REMOVED******REMOVED***] ***REMOVED******REMOVED***
      , ***REMOVED*** o: ***REMOVED*** array: [***REMOVED***x: ***REMOVED***b: null ***REMOVED******REMOVED***, ***REMOVED*** x: ***REMOVED*** b: [null, 1]***REMOVED******REMOVED***] ***REMOVED******REMOVED***
      , ***REMOVED*** o: ***REMOVED*** array: [***REMOVED***x: null ***REMOVED***] ***REMOVED******REMOVED***
      , ***REMOVED*** o: ***REMOVED*** array: [***REMOVED***y: 3 ***REMOVED***] ***REMOVED******REMOVED***
      , ***REMOVED*** o: ***REMOVED*** array: [3, 0, null] ***REMOVED******REMOVED***
      , ***REMOVED*** o: ***REMOVED*** name: 'ha' ***REMOVED******REMOVED***
    ];
    o.arr = [
        ***REMOVED*** arr: [***REMOVED*** a: ***REMOVED*** b: 47 ***REMOVED******REMOVED***, ***REMOVED*** a: ***REMOVED*** c: 48 ***REMOVED******REMOVED***, ***REMOVED*** d: 'yep' ***REMOVED***] ***REMOVED***
      , ***REMOVED*** yep: true ***REMOVED***
    ]
    return o;
  ***REMOVED***

  var o = doc();

  var s = new Bench.Suite;
  s.add('mpath.get("first", obj)', function () ***REMOVED***
    mpath.get('first', o);
  ***REMOVED***)
  s.add('mpath.get("first.second", obj)', function () ***REMOVED***
    mpath.get('first.second', o);
  ***REMOVED***)
  s.add('mpath.get("first.second.third.1.name", obj)', function () ***REMOVED***
    mpath.get('first.second.third.1.name', o);
  ***REMOVED***)
  s.add('mpath.get("comments", obj)', function () ***REMOVED***
    mpath.get('comments', o);
  ***REMOVED***)
  s.add('mpath.get("comments.1", obj)', function () ***REMOVED***
    mpath.get('comments.1', o);
  ***REMOVED***)
  s.add('mpath.get("comments.2.name", obj)', function () ***REMOVED***
    mpath.get('comments.2.name', o);
  ***REMOVED***)
  s.add('mpath.get("comments.2.comments.1.comments.0.val", obj)', function () ***REMOVED***
    mpath.get('comments.2.comments.1.comments.0.val', o);
  ***REMOVED***)
  s.add('mpath.get("comments.name", obj)', function () ***REMOVED***
    mpath.get('comments.name', o);
  ***REMOVED***)

  s.add('mpath.set("first", obj, val)', function () ***REMOVED***
    mpath.set('first', o, 1);
  ***REMOVED***)
  s.add('mpath.set("first.second", obj, val)', function () ***REMOVED***
    mpath.set('first.second', o, 1);
  ***REMOVED***)
  s.add('mpath.set("first.second.third.1.name", obj, val)', function () ***REMOVED***
    mpath.set('first.second.third.1.name', o, 1);
  ***REMOVED***)
  s.add('mpath.set("comments", obj, val)', function () ***REMOVED***
    mpath.set('comments', o, 1);
  ***REMOVED***)
  s.add('mpath.set("comments.1", obj, val)', function () ***REMOVED***
    mpath.set('comments.1', o, 1);
  ***REMOVED***)
  s.add('mpath.set("comments.2.name", obj, val)', function () ***REMOVED***
    mpath.set('comments.2.name', o, 1);
  ***REMOVED***)
  s.add('mpath.set("comments.2.comments.1.comments.0.val", obj, val)', function () ***REMOVED***
    mpath.set('comments.2.comments.1.comments.0.val', o, 1);
  ***REMOVED***)
  s.add('mpath.set("comments.name", obj, val)', function () ***REMOVED***
    mpath.set('comments.name', o, 1);
  ***REMOVED***)

  s.on('start', function () ***REMOVED***
    console.log('starting...');
    out.write('*' + sha + ': ' + String(new Date()) + '\n');
  ***REMOVED***);
  s.on('cycle', function (e) ***REMOVED***
    var s = String(e.target);
    console.log(s);
    out.write(s + '\n');
  ***REMOVED***)
  s.on('complete', function () ***REMOVED***
    console.log('done')
    out.end('');
  ***REMOVED***)
  s.run()
***REMOVED***)

