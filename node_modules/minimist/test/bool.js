var parse = require('../');
var test = require('tape');

test('flag boolean default false', function (t) ***REMOVED***
    var argv = parse(['moo'], ***REMOVED***
        boolean: ['t', 'verbose'],
        default: ***REMOVED*** verbose: false, t: false ***REMOVED***
    ***REMOVED***);
    
    t.deepEqual(argv, ***REMOVED***
        verbose: false,
        t: false,
        _: ['moo']
    ***REMOVED***);
    
    t.deepEqual(typeof argv.verbose, 'boolean');
    t.deepEqual(typeof argv.t, 'boolean');
    t.end();

***REMOVED***);

test('boolean groups', function (t) ***REMOVED***
    var argv = parse([ '-x', '-z', 'one', 'two', 'three' ], ***REMOVED***
        boolean: ['x','y','z']
    ***REMOVED***);
    
    t.deepEqual(argv, ***REMOVED***
        x : true,
        y : false,
        z : true,
        _ : [ 'one', 'two', 'three' ]
    ***REMOVED***);
    
    t.deepEqual(typeof argv.x, 'boolean');
    t.deepEqual(typeof argv.y, 'boolean');
    t.deepEqual(typeof argv.z, 'boolean');
    t.end();
***REMOVED***);
test('boolean and alias with chainable api', function (t) ***REMOVED***
    var aliased = [ '-h', 'derp' ];
    var regular = [ '--herp',  'derp' ];
    var opts = ***REMOVED***
        herp: ***REMOVED*** alias: 'h', boolean: true ***REMOVED***
    ***REMOVED***;
    var aliasedArgv = parse(aliased, ***REMOVED***
        boolean: 'herp',
        alias: ***REMOVED*** h: 'herp' ***REMOVED***
    ***REMOVED***);
    var propertyArgv = parse(regular, ***REMOVED***
        boolean: 'herp',
        alias: ***REMOVED*** h: 'herp' ***REMOVED***
    ***REMOVED***);
    var expected = ***REMOVED***
        herp: true,
        h: true,
        '_': [ 'derp' ]
    ***REMOVED***;
    
    t.same(aliasedArgv, expected);
    t.same(propertyArgv, expected); 
    t.end();
***REMOVED***);

test('boolean and alias with options hash', function (t) ***REMOVED***
    var aliased = [ '-h', 'derp' ];
    var regular = [ '--herp', 'derp' ];
    var opts = ***REMOVED***
        alias: ***REMOVED*** 'h': 'herp' ***REMOVED***,
        boolean: 'herp'
    ***REMOVED***;
    var aliasedArgv = parse(aliased, opts);
    var propertyArgv = parse(regular, opts);
    var expected = ***REMOVED***
        herp: true,
        h: true,
        '_': [ 'derp' ]
    ***REMOVED***;
    t.same(aliasedArgv, expected);
    t.same(propertyArgv, expected);
    t.end();
***REMOVED***);

test('boolean and alias using explicit true', function (t) ***REMOVED***
    var aliased = [ '-h', 'true' ];
    var regular = [ '--herp',  'true' ];
    var opts = ***REMOVED***
        alias: ***REMOVED*** h: 'herp' ***REMOVED***,
        boolean: 'h'
    ***REMOVED***;
    var aliasedArgv = parse(aliased, opts);
    var propertyArgv = parse(regular, opts);
    var expected = ***REMOVED***
        herp: true,
        h: true,
        '_': [ ]
    ***REMOVED***;

    t.same(aliasedArgv, expected);
    t.same(propertyArgv, expected); 
    t.end();
***REMOVED***);

// regression, see https://github.com/substack/node-optimist/issues/71
test('boolean and --x=true', function(t) ***REMOVED***
    var parsed = parse(['--boool', '--other=true'], ***REMOVED***
        boolean: 'boool'
    ***REMOVED***);

    t.same(parsed.boool, true);
    t.same(parsed.other, 'true');

    parsed = parse(['--boool', '--other=false'], ***REMOVED***
        boolean: 'boool'
    ***REMOVED***);
    
    t.same(parsed.boool, true);
    t.same(parsed.other, 'false');
    t.end();
***REMOVED***);
