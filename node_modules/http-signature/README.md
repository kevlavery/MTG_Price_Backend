# node-http-signature

node-http-signature is a node.js library that has client and server components
for Joyent's [HTTP Signature Scheme](http_signing.md).

## Usage

Note the example below signs a request with the same key/cert used to start an
HTTP server. This is almost certainly not what you actually want, but is just
used to illustrate the API calls; you will need to provide your own key
management in addition to this library.

### Client

```js
var fs = require('fs');
var https = require('https');
var httpSignature = require('http-signature');

var key = fs.readFileSync('./key.pem', 'ascii');

var options = ***REMOVED***
  host: 'localhost',
  port: 8443,
  path: '/',
  method: 'GET',
  headers: ***REMOVED******REMOVED***
***REMOVED***;

// Adds a 'Date' header in, signs it, and adds the
// 'Authorization' header in.
var req = https.request(options, function(res) ***REMOVED***
  console.log(res.statusCode);
***REMOVED***);


httpSignature.sign(req, ***REMOVED***
  key: key,
  keyId: './cert.pem'
***REMOVED***);

req.end();
```

### Server

```js
var fs = require('fs');
var https = require('https');
var httpSignature = require('http-signature');

var options = ***REMOVED***
  key: fs.readFileSync('./key.pem'),
  cert: fs.readFileSync('./cert.pem')
***REMOVED***;

https.createServer(options, function (req, res) ***REMOVED***
  var rc = 200;
  var parsed = httpSignature.parseRequest(req);
  var pub = fs.readFileSync(parsed.keyId, 'ascii');
  if (!httpSignature.verifySignature(parsed, pub))
    rc = 401;

  res.writeHead(rc);
  res.end();
***REMOVED***).listen(8443);
```

## Installation

    npm install http-signature

## License

MIT.

## Bugs

See <https://github.com/joyent/node-http-signature/issues>.
