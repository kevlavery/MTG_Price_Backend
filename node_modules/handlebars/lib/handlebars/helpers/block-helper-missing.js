import ***REMOVED***appendContextPath, createFrame, isArray***REMOVED*** from '../utils';

export default function(instance) ***REMOVED***
  instance.registerHelper('blockHelperMissing', function(context, options) ***REMOVED***
    let inverse = options.inverse,
        fn = options.fn;

    if (context === true) ***REMOVED***
      return fn(this);
    ***REMOVED*** else if (context === false || context == null) ***REMOVED***
      return inverse(this);
    ***REMOVED*** else if (isArray(context)) ***REMOVED***
      if (context.length > 0) ***REMOVED***
        if (options.ids) ***REMOVED***
          options.ids = [options.name];
        ***REMOVED***

        return instance.helpers.each(context, options);
      ***REMOVED*** else ***REMOVED***
        return inverse(this);
      ***REMOVED***
    ***REMOVED*** else ***REMOVED***
      if (options.data && options.ids) ***REMOVED***
        let data = createFrame(options.data);
        data.contextPath = appendContextPath(options.data.contextPath, options.name);
        options = ***REMOVED***data: data***REMOVED***;
      ***REMOVED***

      return fn(context, options);
    ***REMOVED***
  ***REMOVED***);
***REMOVED***
