'use strict';
module.exports = function generate_dependencies(it, $keyword, $ruleType) ***REMOVED***
  var out = ' ';
  var $lvl = it.level;
  var $dataLvl = it.dataLevel;
  var $schema = it.schema[$keyword];
  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);
  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;
  var $breakOnError = !it.opts.allErrors;
  var $data = 'data' + ($dataLvl || '');
  var $errs = 'errs__' + $lvl;
  var $it = it.util.copy(it);
  var $closingBraces = '';
  $it.level++;
  var $nextValid = 'valid' + $it.level;
  var $schemaDeps = ***REMOVED******REMOVED***,
    $propertyDeps = ***REMOVED******REMOVED***,
    $ownProperties = it.opts.ownProperties;
  for ($property in $schema) ***REMOVED***
    var $sch = $schema[$property];
    var $deps = Array.isArray($sch) ? $propertyDeps : $schemaDeps;
    $deps[$property] = $sch;
  ***REMOVED***
  out += 'var ' + ($errs) + ' = errors;';
  var $currentErrorPath = it.errorPath;
  out += 'var missing' + ($lvl) + ';';
  for (var $property in $propertyDeps) ***REMOVED***
    $deps = $propertyDeps[$property];
    if ($deps.length) ***REMOVED***
      out += ' if ( ' + ($data) + (it.util.getProperty($property)) + ' !== undefined ';
      if ($ownProperties) ***REMOVED***
        out += ' && Object.prototype.hasOwnProperty.call(' + ($data) + ', \'' + (it.util.escapeQuotes($property)) + '\') ';
      ***REMOVED***
      if ($breakOnError) ***REMOVED***
        out += ' && ( ';
        var arr1 = $deps;
        if (arr1) ***REMOVED***
          var $propertyKey, $i = -1,
            l1 = arr1.length - 1;
          while ($i < l1) ***REMOVED***
            $propertyKey = arr1[$i += 1];
            if ($i) ***REMOVED***
              out += ' || ';
            ***REMOVED***
            var $prop = it.util.getProperty($propertyKey),
              $useData = $data + $prop;
            out += ' ( ( ' + ($useData) + ' === undefined ';
            if ($ownProperties) ***REMOVED***
              out += ' || ! Object.prototype.hasOwnProperty.call(' + ($data) + ', \'' + (it.util.escapeQuotes($propertyKey)) + '\') ';
            ***REMOVED***
            out += ') && (missing' + ($lvl) + ' = ' + (it.util.toQuotedString(it.opts.jsonPointers ? $propertyKey : $prop)) + ') ) ';
          ***REMOVED***
        ***REMOVED***
        out += ')) ***REMOVED***  ';
        var $propertyPath = 'missing' + $lvl,
          $missingProperty = '\' + ' + $propertyPath + ' + \'';
        if (it.opts._errorDataPathProperty) ***REMOVED***
          it.errorPath = it.opts.jsonPointers ? it.util.getPathExpr($currentErrorPath, $propertyPath, true) : $currentErrorPath + ' + ' + $propertyPath;
        ***REMOVED***
        var $$outStack = $$outStack || [];
        $$outStack.push(out);
        out = ''; /* istanbul ignore else */
        if (it.createErrors !== false) ***REMOVED***
          out += ' ***REMOVED*** keyword: \'' + ('dependencies') + '\' , dataPath: (dataPath || \'\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: ***REMOVED*** property: \'' + (it.util.escapeQuotes($property)) + '\', missingProperty: \'' + ($missingProperty) + '\', depsCount: ' + ($deps.length) + ', deps: \'' + (it.util.escapeQuotes($deps.length == 1 ? $deps[0] : $deps.join(", "))) + '\' ***REMOVED*** ';
          if (it.opts.messages !== false) ***REMOVED***
            out += ' , message: \'should have ';
            if ($deps.length == 1) ***REMOVED***
              out += 'property ' + (it.util.escapeQuotes($deps[0]));
            ***REMOVED*** else ***REMOVED***
              out += 'properties ' + (it.util.escapeQuotes($deps.join(", ")));
            ***REMOVED***
            out += ' when property ' + (it.util.escapeQuotes($property)) + ' is present\' ';
          ***REMOVED***
          if (it.opts.verbose) ***REMOVED***
            out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';
          ***REMOVED***
          out += ' ***REMOVED*** ';
        ***REMOVED*** else ***REMOVED***
          out += ' ***REMOVED******REMOVED*** ';
        ***REMOVED***
        var __err = out;
        out = $$outStack.pop();
        if (!it.compositeRule && $breakOnError) ***REMOVED*** /* istanbul ignore if */
          if (it.async) ***REMOVED***
            out += ' throw new ValidationError([' + (__err) + ']); ';
          ***REMOVED*** else ***REMOVED***
            out += ' validate.errors = [' + (__err) + ']; return false; ';
          ***REMOVED***
        ***REMOVED*** else ***REMOVED***
          out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';
        ***REMOVED***
      ***REMOVED*** else ***REMOVED***
        out += ' ) ***REMOVED*** ';
        var arr2 = $deps;
        if (arr2) ***REMOVED***
          var $propertyKey, i2 = -1,
            l2 = arr2.length - 1;
          while (i2 < l2) ***REMOVED***
            $propertyKey = arr2[i2 += 1];
            var $prop = it.util.getProperty($propertyKey),
              $missingProperty = it.util.escapeQuotes($propertyKey),
              $useData = $data + $prop;
            if (it.opts._errorDataPathProperty) ***REMOVED***
              it.errorPath = it.util.getPath($currentErrorPath, $propertyKey, it.opts.jsonPointers);
            ***REMOVED***
            out += ' if ( ' + ($useData) + ' === undefined ';
            if ($ownProperties) ***REMOVED***
              out += ' || ! Object.prototype.hasOwnProperty.call(' + ($data) + ', \'' + (it.util.escapeQuotes($propertyKey)) + '\') ';
            ***REMOVED***
            out += ') ***REMOVED***  var err =   '; /* istanbul ignore else */
            if (it.createErrors !== false) ***REMOVED***
              out += ' ***REMOVED*** keyword: \'' + ('dependencies') + '\' , dataPath: (dataPath || \'\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: ***REMOVED*** property: \'' + (it.util.escapeQuotes($property)) + '\', missingProperty: \'' + ($missingProperty) + '\', depsCount: ' + ($deps.length) + ', deps: \'' + (it.util.escapeQuotes($deps.length == 1 ? $deps[0] : $deps.join(", "))) + '\' ***REMOVED*** ';
              if (it.opts.messages !== false) ***REMOVED***
                out += ' , message: \'should have ';
                if ($deps.length == 1) ***REMOVED***
                  out += 'property ' + (it.util.escapeQuotes($deps[0]));
                ***REMOVED*** else ***REMOVED***
                  out += 'properties ' + (it.util.escapeQuotes($deps.join(", ")));
                ***REMOVED***
                out += ' when property ' + (it.util.escapeQuotes($property)) + ' is present\' ';
              ***REMOVED***
              if (it.opts.verbose) ***REMOVED***
                out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';
              ***REMOVED***
              out += ' ***REMOVED*** ';
            ***REMOVED*** else ***REMOVED***
              out += ' ***REMOVED******REMOVED*** ';
            ***REMOVED***
            out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ***REMOVED*** ';
          ***REMOVED***
        ***REMOVED***
      ***REMOVED***
      out += ' ***REMOVED***   ';
      if ($breakOnError) ***REMOVED***
        $closingBraces += '***REMOVED***';
        out += ' else ***REMOVED*** ';
      ***REMOVED***
    ***REMOVED***
  ***REMOVED***
  it.errorPath = $currentErrorPath;
  var $currentBaseId = $it.baseId;
  for (var $property in $schemaDeps) ***REMOVED***
    var $sch = $schemaDeps[$property];
    if (it.util.schemaHasRules($sch, it.RULES.all)) ***REMOVED***
      out += ' ' + ($nextValid) + ' = true; if ( ' + ($data) + (it.util.getProperty($property)) + ' !== undefined ';
      if ($ownProperties) ***REMOVED***
        out += ' && Object.prototype.hasOwnProperty.call(' + ($data) + ', \'' + (it.util.escapeQuotes($property)) + '\') ';
      ***REMOVED***
      out += ') ***REMOVED*** ';
      $it.schema = $sch;
      $it.schemaPath = $schemaPath + it.util.getProperty($property);
      $it.errSchemaPath = $errSchemaPath + '/' + it.util.escapeFragment($property);
      out += '  ' + (it.validate($it)) + ' ';
      $it.baseId = $currentBaseId;
      out += ' ***REMOVED***  ';
      if ($breakOnError) ***REMOVED***
        out += ' if (' + ($nextValid) + ') ***REMOVED*** ';
        $closingBraces += '***REMOVED***';
      ***REMOVED***
    ***REMOVED***
  ***REMOVED***
  if ($breakOnError) ***REMOVED***
    out += '   ' + ($closingBraces) + ' if (' + ($errs) + ' == errors) ***REMOVED***';
  ***REMOVED***
  out = it.util.cleanUpCode(out);
  return out;
***REMOVED***
